from matplotlib import pyplot as plt
import numpy as np

def visualize(experiment_name):
    print(experiment_name)
    print(min(sums))
    print(np.argmin(sums))
    plt.title(experiment_name)
    plt.ylim(0.08, 0.12)
    plt.plot(np.arange(len(sums)) * 572, sums)
    plt.show()
# ea = event_accumulator.EventAccumulator('/mnt/antares_raid/home/awesomelemon/runs6/04_44PM_on_November_06_2019/events.out.tfevents.1573055088.eltanin', size_guidance=size_guidance)
sums = [0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.08827829658985138, 0.11245155334472656, 0.0992122620344162, 0.09476644843816757, 0.09194141328334808, 0.08986887484788894, 0.09075728654861451, 0.08890370428562164, 0.08824683725833893, 0.08813987523317338, 0.08801027089357376, 0.08793476372957229, 0.08750566393136978, 0.08689409494400024, 0.0869909942150116, 0.0869771495461464, 0.08658831119537354, 0.08741757422685623, 0.08804046660661698, 0.08678965419530868, 0.08773091286420823, 0.08685382753610611, 0.08733703792095185, 0.08695198446512223, 0.08640333265066147, 0.08695197850465775, 0.08699351251125335, 0.08705265074968338, 0.08754089772701264, 0.08682740181684494, 0.08661725670099259, 0.08650022596120835, 0.08669149726629258, 0.08691296875476837, 0.08711179196834565, 0.0868123009800911, 0.08710298389196396, 0.08713947981595993, 0.08691800385713577, 0.08716338872909546, 0.08748804479837417, 0.0870828539133072, 0.0877762109041214, 0.08724014759063721, 0.08733578026294708, 0.08761262446641922, 0.08736346662044525, 0.08713570535182953, 0.08762898147106171, 0.08736850172281266, 0.08770070970058441, 0.08795616030693054, 0.0878806546330452, 0.08739492446184158, 0.08770951479673386, 0.08784918934106827, 0.08776111602783203, 0.08791212290525437, 0.08772840052843094, 0.08806312084197998, 0.0876830980181694, 0.08792973011732101, 0.08780263811349868, 0.0879649668931961, 0.08803920596837997, 0.0877988576889038, 0.0876944124698639, 0.08779634386301041, 0.08810590654611587, 0.08836512714624405, 0.0879586711525917, 0.08819273561239242, 0.08784290850162506, 0.08808451145887375, 0.0879838451743126, 0.08803543597459793, 0.0880178228020668, 0.08819524645805359, 0.08818895816802978, 0.08843936920166015, 0.08820531517267227, 0.0877434954047203, 0.08816630691289902, 0.08797503858804703, 0.08828333765268326, 0.08805557042360306, 0.0882002830505371, 0.08820154219865799, 0.08792217671871186, 0.08811974972486496, 0.08804424852132797, 0.08818769752979279, 0.08820909261703491, 0.08830094933509827, 0.08818769454956055, 0.08829339891672135, 0.08824810087680816, 0.08846327811479568, 0.08815372288227082, 0.0882795587182045, 0.08827829658985138]
sums = sums[100:]
visualize('8 penultimate blocks, random init')

# ea = event_accumulator.EventAccumulator('/mnt/antares_raid/home/awesomelemon/runs6/09_14AM_on_November_08_2019/events.out.tfevents.1573200854.eltanin', size_guidance=size_guidance)
# this is the first 'nohup':more_blocks
sums = [0.10855061262845993, 0.09816403985023499, 0.0942844957113266, 0.09182438403367996, 0.09065913259983063, 0.08893264830112457, 0.08878668397665024, 0.0877648875117302, 0.08755222260951996, 0.08716842234134674, 0.08776362836360932, 0.08768686354160309, 0.08718100637197494, 0.08751698732376098, 0.08667891472578049, 0.0872149795293808, 0.08774348944425583, 0.08749685436487198, 0.08686767518520355, 0.08720491081476212, 0.08739115297794342, 0.08766170144081116, 0.0873118743300438, 0.08729803115129471, 0.08751950711011887, 0.08810339123010635, 0.08814869225025176, 0.08806186318397521, 0.0880643755197525, 0.08688276708126068, 0.0872187539935112, 0.08731313347816468, 0.08725902140140533, 0.08762017488479615, 0.08764659464359284, 0.08755725473165513, 0.08780264258384704, 0.08801278471946716, 0.08789072185754776, 0.08789827674627304]
visualize('more_blocks')

#from here on (and before too), in the same chronological order as export_tensorboard.py
#init_ones
sums = [0.1096906915307045, 0.101113660633564, 0.09469345957040787, 0.09273669123649597, 0.09194140881299973, 0.08957945406436921, 0.09064654856920243, 0.09003372341394425, 0.09024010002613067, 0.08874138295650483, 0.08919942975044251, 0.08785800784826278, 0.08792092502117158, 0.08923465758562088, 0.08770951628684998, 0.08934287428855896, 0.08903709948062896, 0.08833618462085724, 0.08854758888483047, 0.08899179697036744, 0.08905849754810333, 0.08943978250026703, 0.08910127133131027, 0.08911007940769196, 0.08986384868621826, 0.08874892890453338, 0.09109075367450714, 0.08959832787513733, 0.08960713744163513, 0.08915538340806961, 0.08920320272445678, 0.08938817977905274, 0.08916545063257217, 0.08994563966989517, 0.09033572971820832, 0.08992047607898712, 0.08986762166023254, 0.09012306630611419, 0.09026023149490356, 0.08994941860437393, 0.08945235460996628, 0.08992173075675965, 0.0899091437458992, 0.08994941413402557, 0.08999093621969223, 0.08952785879373551, 0.08913650661706925, 0.08949891924858093, 0.08904213011264801, 0.0896650180220604, 0.08943474441766738, 0.08949765861034394, 0.08930387049913406, 0.08937811106443405, 0.08929254859685898, 0.08919816762208939, 0.08960336446762085, 0.08911637365818023, 0.08905093520879745, 0.08919690698385238, 0.08918935805559158, 0.08908994644880294, 0.08922333121299744, 0.08919061720371246, 0.08894901275634766, 0.0894095778465271, 0.08917803466320037, 0.0893340677022934, 0.08935168385505676, 0.08944606631994248]
visualize('init_ones')

#different_lr_schedule
sums = [0.11081693172454835, 0.09885992258787155, 0.0954082116484642, 0.09336714148521423, 0.09144183695316314, 0.089491368830204, 0.08854884803295135, 0.0886193186044693, 0.08800775408744813, 0.08708914369344711, 0.08689409792423249, 0.08657698631286621, 0.08627371788024903, 0.08682740479707718, 0.08664115965366363, 0.08725901842117309, 0.0868198499083519, 0.08643730729818344, 0.0871935874223709, 0.08689535111188888, 0.08674309253692628, 0.08684753477573395, 0.08707404285669326, 0.08697840422391892, 0.08707907348871231, 0.08657699078321457, 0.08703881204128265, 0.08689409345388413, 0.08672295957803726, 0.0874024748802185, 0.08712312132120133, 0.08753460049629211, 0.08734458833932876, 0.08723888844251633, 0.0872376337647438, 0.08733955919742584, 0.08722253292798995, 0.08749307841062545, 0.08748301565647125, 0.08725902587175369, 0.08741380274295807, 0.08761513978242874, 0.0876528948545456, 0.08767679929733277, 0.0878076747059822, 0.08795867264270782, 0.08775482177734376, 0.08785171806812286, 0.08781522363424302, 0.08771958649158478, 0.0881008729338646, 0.08821412473917008, 0.08789072483778, 0.08800271451473236, 0.08798888027667999, 0.0880001962184906, 0.08760885000228882, 0.08798761814832687, 0.087985098361969, 0.08822796046733856, 0.08800020217895507, 0.08823551535606385, 0.08820279687643051, 0.08814743012189866, 0.08824432641267776, 0.08812351822853089, 0.08839407414197922, 0.0881965070962906, 0.08839533179998398, 0.08834121972322465]
visualize('different_lr_schedule')

#smaller_lr
sums = [0.1341055527329445, 0.11967207193374634, 0.11006694287061691, 0.1050032690167427, 0.10201842188835145, 0.09778526723384857, 0.09656716883182526, 0.09442794770002365, 0.09404666274785996]
visualize('smaller_lr')

'''
nohup sh -c "sleep 37h ; cd pycharm_project_AA_more_blocks ; python multi_task/train_multi_task_automl.py ; 
cd ../pycharm_project_AA_init_ones ; python multi_task/train_multi_task_automl.py ; 
cd ../pycharm_project_AA_different_lr_schedule ; python multi_task/train_multi_task_automl.py ; 
cd ../pycharm_project_AA_smaller_lr ; python multi_task/train_multi_task_automl.py ; 
cd ../pycharm_project_AA_batch128 ; python multi_task/train_multi_task_automl.py ; 
cd ../pycharm_project_AA_slower_sigmoid ; python multi_task/train_multi_task_automl.py ; 
cd ../pycharm_project_AA_95_5_train ; python multi_task/train_multi_task_automl.py" &

'''

#ea = event_accumulator.EventAccumulator('/mnt/antares_raid/home/awesomelemon/runs6/12_28PM_on_November_12_2019/events.out.tfevents.1573558116.eltanin',size_guidance=size_guidance)
sums = [0.11004177927970886, 0.09894171506166458, 0.096743343770504, 0.09401016533374787, 0.09480797350406647, 0.09326521754264831, 0.08946997672319412, 0.09140660315752029, 0.09228494465351104, 0.08904212713241577, 0.08970655053853989, 0.08914657831192016, 0.09060502797365189, 0.08915286660194396, 0.08838651478290557, 0.0883953258395195, 0.09150727391242981, 0.08927366882562637, 0.09029798060655594, 0.08964740335941315, 0.09174510687589646, 0.09057608097791672, 0.09416746348142624, 0.09165702164173126, 0.09215658754110337]
visualize('freeze connections after 10th epoch (of 25)')

sums = [0.10884255319833755, 0.1022826761007309, 0.09635451138019561, 0.09327024668455124, 0.09408818334341049, 0.09261464029550552, 0.09028665274381638, 0.08998087495565414, 0.09032692164182662, 0.08932652175426484, 0.09041501134634018, 0.08898298144340515, 0.09142925441265107, 0.09270523488521576, 0.09091709405183793, 0.08872627913951874, 0.09122037142515182, 0.08855011314153671, 0.08994437903165817, 0.0894171267747879, 0.09115492701530456, 0.09109830558300018, 0.08894775211811065, 0.090326926112175, 0.09094603806734085, 0.09033573418855667, 0.09140660315752029, 0.0900374934077263, 0.09038732945919037, 0.08980973362922669, 0.09028665572404862, 0.09112346917390823, 0.09104167819023132, 0.09089570492506027, 0.09138898551464081, 0.09322117418050765, 0.09283485561609268, 0.09335581958293915, 0.09329037964344025, 0.09332561492919922]
visualize('freeze connections between 10 & 20 epochs (of 40)')

sums = [0.10992096960544587, 0.10068706721067429, 0.09684527367353439, 0.09571022540330887, 0.09237303286790848, 0.093720743060112, 0.0903948798775673, 0.09134242385625839, 0.08996576964855194, 0.08903709799051285, 0.09066794216632842, 0.08973172158002854, 0.08833744376897812, 0.08985755294561386, 0.08800649344921112, 0.08907358795404434, 0.08885589241981506, 0.08955176919698715, 0.08982232064008713, 0.09057859927415848, 0.08841294795274734, 0.0887980043888092, 0.09131348133087158, 0.090579853951931, 0.08961720466613769, 0.09031308442354202, 0.09022122025489807, 0.09082020372152329, 0.09135627299547196, 0.09008532166481018, 0.08958574831485748, 0.08998087048530579, 0.09015327095985412, 0.09079503566026688, 0.09181053787469864, 0.0918495461344719, 0.09131096601486206, 0.0912795051932335, 0.09165324717760086, 0.09213394224643708]
visualize('freeze connections every 2nd epoch (of 40)')
